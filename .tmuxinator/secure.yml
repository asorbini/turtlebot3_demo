name: secure
tmux_command: byobu
# on_project_start: |
#   export ROS_SECURITY_ENABLE=true
#   export ROS_SECURITY_STRATEGY=Enforce
#   export ROS_SECURITY_ROOT_DIRECTORY=$TB3_DEMO_DIR/keystore
#   export ROS_SECURITY_LOOKUP_TYPE=MATCH_PREFIX

windows:
  - diagnostic:
      layout: main-vertical
      panes:
        - glances
  - turtlebot:
      layout: main-vertical
      panes:
        - gazebo:
          - ros2 launch turtlebot3_gazebo turtlebot3_world.launch.py
        - teleop:
          - ros2 run turtlebot3_teleop teleop_keyboard
        - echo:
          - ros2 topic echo /cmd_vel
  - navigation:
      layout: main-vertical
      panes:
        - turtlebot:
          - ros2 launch turtlebot3_navigation2 navigation2.launch.py use_sim_time:=true map:=maps/map_original.yaml
        - teleop:
          - echo configs/initial_pose.sh
        - echo:
          - echo configs/navigate_to_pose.sh
  - sros:
      layout: main-vertical
      panes:
        - turtlebot:
          - tree keystore -d
        - teleop:
          - echo ros2 security generate_artifacts -k keystore -p policies/tb3_gazebo_policy.xml
        - echo:
          - env | grep ROS
